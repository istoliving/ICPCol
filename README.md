<h1 align="center">ICPCOL</h1>
<p align="center">
    一款工xin部域名备案查询工具，可以对单一或批量主体备案信息查询
</p>
<p align="center">
    <img src="https://badgen.net/badge/language/python"> 
    <img src="https://badgen.net/github/stars/OssianSong/ICPCol">
    <img src="https://badgen.net/github/forks/OssianSong/ICPCol">
	<img src="https://badgen.net/github/issues/OssianSong/ICPCol">
    <a href="https://angesec.com"><img src="https://img.shields.io/badge/blog-@%20%E6%9A%97%E6%A0%BC%E5%AE%89%E5%85%A8-blue.svg?style=social"></a>
</p>



## 环境要求

在使用之前需要使用 pip 安装依赖库文件

```python
pip install -r requirements.txt
```

直接运行 python 脚本或使用 `-h` 参数可以查看功能列表

```
C:\>python ICPCol.py
usage: python ICPCol.py [-t TARGET | -f FILE] [-o [FILENAME]] [-h]

 __     ______     ______   ______     ______     __
/\ \   /\  ___\   /\  == \ /\  ___\   /\  __ \   /\ \
\ \ \  \ \ \____  \ \  _-/ \ \ \____  \ \ \/\ \  \ \ \____
 \ \_\  \ \_____\  \ \_\    \ \_____\  \ \_____\  \ \_____\
  \/_/   \/_____/   \/_/     \/_____/   \/_____/   \/_____/  by OssianSong

options:
  -t TARGET      输入公司名/备案号/域名/IP查询对应备案信息
  -f FILE        从指定txt文件中读取数据进行批量查询
  -o [FILENAME]  指定文件名将数据保存到Excel中,参数为空时使用默认文件名
  -h, --help     查看程序使用帮助
```



## 快速使用

通过 `-t` 参数指定查询目标，可以查询**域名**、**IP**和**公司名**，如果未指定 `-o` 参数则直接将结果打印输出

```
C:\>python ICPCol.py -t baidu.com
[√] 获取 cookie 成功
[√] 获取 token 成功
[√] 计算验证码滑块缺口位置成功
[√] 自动破解滑块验证码成功
查询对象：baidu.com 共有 1 个已备案域名
正在查询第1页...
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
|        域名主办方        |     网站备案号    |    域名   | 域名类型 | 审批项 | 限制接入 |  备案日期  |
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
| 北京百度网讯科技有限公司 | 京ICP证030173号-1 | baidu.com |   企业   |   无   |    否    | 2023-01-10 |
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
```

通过 `-f` 参数指定 txt 文件，可以对文件内目标进行批量查询。需要注意的是，如果查询数据较大，IP会被工信部网站封禁

```
C:\>python ICPCol.py -f targets.txt
[1] 查询对象：baidu.com
查询对象共发现 1 个已备案域名
正在查询第1页...
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
|        域名主办方        |     网站备案号    |    域名   | 域名类型 | 审批项 | 限制接入 |  备案日期  |
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
| 北京百度网讯科技有限公司 | 京ICP证030173号-1 | baidu.com |   企业   |   无   |    否    | 2023-01-10 |
+--------------------------+-------------------+-----------+----------+--------+----------+------------+
[2] 查询对象：iqiyi.com
查询对象共发现 1 个已备案域名
正在查询第1页...
+------------------------+---------------------+-----------+----------+--------+----------+------------+
|       域名主办方       |      网站备案号     |    域名   | 域名类型 | 审批项 | 限制接入 |  备案日期  |
+------------------------+---------------------+-----------+----------+--------+----------+------------+
| 北京爱奇艺科技有限公司 | 京ICP备11032965号-1 | iqiyi.com |   企业   |   无   |    否    | 2022-06-08 |
+------------------------+---------------------+-----------+----------+--------+----------+------------+
```

如果希望将结果保存到 Excel 中，可以使用 `-o` 参数，如果未在参数后指定文件名，便会自动使用当前时间戳作为保存的文件名
